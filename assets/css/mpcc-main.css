/**
 * MemberPress Courses Copilot - Main Stylesheet
 * Entry point for all CSS imports following optimized architecture
 *
 * @package MemberPressCoursesCopilot
 * @version 2.0.0
 */

/* ==========================================================================
   Core Imports (Order matters!)
   ========================================================================== */

/* 1. Variables & Design Tokens */
@import url('mpcc-variables.css');

/* 2. Base Styles & Utilities */
@import url('mpcc-base.css');

/* 3. Reusable Components */
@import url('mpcc-components.css');

/* 4. Layout Patterns */
@import url('mpcc-layouts.css');

/* ==========================================================================
   Feature-Specific Overrides (if needed)
   ========================================================================== */

/* WordPress Admin Specific Adjustments */
.wp-admin .mpcc-container {
  /* Ensure proper font stack in WP Admin */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* Account for WordPress admin bar */
.admin-bar .mpcc-course-editor {
  height: calc(100vh - 32px);
}

@media screen and (max-width: 782px) {
  .admin-bar .mpcc-course-editor {
    height: calc(100vh - 46px);
  }
}

/* ==========================================================================
   Third-party Integrations
   ========================================================================== */

/* TinyMCE Editor Integration */
.mpcc-tinymce-wrapper .mce-container {
  border-radius: var(--mpcc-radius-md);
}

/* WordPress Components Integration */
.mpcc-container .components-button {
  font-family: inherit;
}

/* ==========================================================================
   Browser-Specific Fixes
   ========================================================================== */

/* Firefox */
@-moz-document url-prefix() {
  .mpcc-form-select {
    background-position: right var(--mpcc-spacing-2) center;
  }
}

/* Edge */
@supports (-ms-ime-align: auto) {
  .mpcc-form-input,
  .mpcc-form-textarea {
    font-family: inherit;
  }
}

/* Safari */
@media not all and (min-resolution:.001dpcm) {
  @supports (-webkit-appearance:none) {
    .mpcc-form-input[type="search"]::-webkit-search-decoration {
      -webkit-appearance: none;
    }
  }
}

/* ==========================================================================
   Performance Optimizations
   ========================================================================== */

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .mpcc-modal-backdrop,
  .mpcc-modal {
    transition: none !important;
  }
}

/* ==========================================================================
   Dark Mode Support
   ========================================================================== */

@media (prefers-color-scheme: dark) {
  /* Auto dark mode based on system preference */
  :root:not(.mpcc-theme-light) {
    /* Apply dark theme variables */
    --mpcc-bg-primary: #1e1e1e;
    --mpcc-bg-secondary: #2d2d2d;
    --mpcc-bg-tertiary: #3c3c3c;
    --mpcc-text-primary: #e0e0e0;
    --mpcc-text-secondary: #b0b0b0;
    --mpcc-text-muted: #888888;
    --mpcc-border-primary: #404040;
    --mpcc-border-secondary: #505050;
  }
}

/* ==========================================================================
   High Contrast Mode
   ========================================================================== */

@media (prefers-contrast: high) {
  .mpcc-container {
    --mpcc-border-width-thin: 2px;
  }
  
  .mpcc-btn,
  .mpcc-form-input,
  .mpcc-form-textarea,
  .mpcc-form-select,
  .mpcc-card,
  .mpcc-modal {
    border-width: 2px !important;
  }
  
  .mpcc-btn:focus,
  .mpcc-form-input:focus,
  .mpcc-form-textarea:focus,
  .mpcc-form-select:focus {
    outline-width: 3px;
    outline-offset: 3px;
  }
}

/* ==========================================================================
   Critical Overrides for Legacy Support
   ========================================================================== */

/* Ensure proper Dashicons display */
.dashicons,
.dashicons::before,
.dashicons-before::before {
  font-family: 'dashicons' !important;
  font-weight: 400;
  font-style: normal;
  speak: never;
  text-decoration: inherit;
  text-transform: none;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1;
}

/* ==========================================================================
   Utility Overrides for Specificity
   ========================================================================== */

/* Ensure utility classes have highest specificity */
.mpcc-container [class*="mpcc-"].mpcc-hidden {
  display: none !important;
}

.mpcc-container [class*="mpcc-"].mpcc-sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border-width: 0 !important;
}

/* ==========================================================================
   Development Helpers (Remove in production)
   ========================================================================== */

/* Debug grid overlay */
.mpcc-debug-grid {
  position: relative;
}

.mpcc-debug-grid::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-linear-gradient(0deg, 
      rgba(255, 0, 0, 0.1) 0px, 
      transparent 1px, 
      transparent calc(var(--mpcc-spacing-4) - 1px), 
      rgba(255, 0, 0, 0.1) var(--mpcc-spacing-4)),
    repeating-linear-gradient(90deg, 
      rgba(255, 0, 0, 0.1) 0px, 
      transparent 1px, 
      transparent calc(var(--mpcc-spacing-4) - 1px), 
      rgba(255, 0, 0, 0.1) var(--mpcc-spacing-4));
  pointer-events: none;
  z-index: 9999;
}

/* Component boundaries */
.mpcc-debug-outline * {
  outline: 1px dashed rgba(255, 0, 0, 0.5);
}