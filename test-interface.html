<!DOCTYPE html>
<html>
<head>
    <title>Test MemberPress Courses Copilot Interface</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .status { padding: 10px; margin: 10px 0; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        button { margin: 5px; padding: 10px 15px; }
    </style>
</head>
<body>
    <h1>MemberPress Courses Copilot - Interface Test</h1>
    
    <div class="test-section">
        <h2>Element Check</h2>
        <button onclick="checkElements()">Check Required Elements</button>
        <div id="element-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Function Check</h2>
        <button onclick="checkFunctions()">Check Required Functions</button>
        <div id="function-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Event Handler Check</h2>
        <button onclick="checkEventHandlers()">Check Event Handlers</button>
        <div id="event-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Manual Tests</h2>
        <button onclick="testSessionManager()">Test Session Manager</button>
        <button onclick="testNewConversation()">Test New Conversation</button>
        <button onclick="testQuickStart()">Test Quick Start</button>
        <div id="manual-results"></div>
    </div>
    
    <script>
    function checkElements() {
        const elements = [
            '#mpcc-chat-input',
            '#mpcc-send-message',
            '#mpcc-session-manager-btn',
            '#mpcc-new-conversation-btn',
            '.mpcc-quick-start',
            '#mpcc-session-list'
        ];
        
        let html = '<h3>Element Status:</h3>';
        elements.forEach(selector => {
            const exists = jQuery(selector).length > 0;
            const status = exists ? 'success' : 'error';
            html += `<div class="status ${status}">${selector}: ${exists ? 'Found' : 'Not Found'}</div>`;
        });
        
        document.getElementById('element-results').innerHTML = html;
    }
    
    function checkFunctions() {
        const functions = [
            'initializeUIComponents',
            'createNewConversation',
            'showSessionManager',
            'MPCC'
        ];
        
        let html = '<h3>Function Status:</h3>';
        functions.forEach(func => {
            const exists = typeof window[func] !== 'undefined';
            const status = exists ? 'success' : 'error';
            html += `<div class="status ${status}">${func}: ${exists ? 'Available' : 'Not Found'}</div>`;
        });
        
        document.getElementById('function-results').innerHTML = html;
    }
    
    function checkEventHandlers() {
        let html = '<h3>Event Handler Status:</h3>';
        
        // Check document-level handlers
        const docEvents = jQuery._data(document, 'events');
        if (docEvents && docEvents.click) {
            html += '<div class="status success">Document click handlers found:</div>';
            docEvents.click.forEach(handler => {
                if (handler.namespace && handler.namespace.includes('mpcc')) {
                    html += `<div class="status warning">- Namespace: ${handler.namespace}, Selector: ${handler.selector || 'none'}</div>`;
                }
            });
        } else {
            html += '<div class="status error">No document click handlers found</div>';
        }
        
        document.getElementById('event-results').innerHTML = html;
    }
    
    function testSessionManager() {
        let html = '<h3>Session Manager Test:</h3>';
        try {
            jQuery('#mpcc-session-manager-btn').trigger('click');
            html += '<div class="status success">Session manager button clicked</div>';
        } catch (e) {
            html += `<div class="status error">Error: ${e.message}</div>`;
        }
        document.getElementById('manual-results').innerHTML = html;
    }
    
    function testNewConversation() {
        let html = '<h3>New Conversation Test:</h3>';
        try {
            if (window.createNewConversation) {
                html += '<div class="status success">createNewConversation function exists</div>';
            } else {
                html += '<div class="status error">createNewConversation function not found</div>';
            }
        } catch (e) {
            html += `<div class="status error">Error: ${e.message}</div>`;
        }
        document.getElementById('manual-results').innerHTML = html;
    }
    
    function testQuickStart() {
        let html = '<h3>Quick Start Test:</h3>';
        try {
            const button = jQuery('.mpcc-quick-start').first();
            if (button.length) {
                button.trigger('click');
                html += '<div class="status success">Quick start button clicked</div>';
            } else {
                html += '<div class="status error">No quick start button found</div>';
            }
        } catch (e) {
            html += `<div class="status error">Error: ${e.message}</div>`;
        }
        document.getElementById('manual-results').innerHTML = html;
    }
    </script>
</body>
</html>